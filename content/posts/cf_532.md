---
title:      "Codeforces Round #532"
date:       2019-01-14T00:35:52+09:00
categories: ["competitive_programming"]
tags:       ["contest","codeforces"]
draft:      false
---

そんなによくできた感もないのだが+107．よくできたと思って+30しか出なかった経験も3回くらいあるのでますます謎．

<!--more-->

# A. Roman and Browser

問題文が難しかった．要するに「$1$と$-1$からなる配列から$b+ik$（$i$はすべての整数）番目の値を消したときの$1$の数と$-1$の数の差」の最大値を求める問題．https://codeforces.com/contest/1100/submission/48359005

解法としては$b$をすべて試せばよい（コード中では$v$）．さらに$b$は$0$から$(k-1)$まで試せばすべて尽くせる（$c=b+ik$の$i$が負にも動くため）．各$b$に対応する$c$も時間内に全部作れるため，$a[c]=1$または$-1$である$c$の個数をそれぞれ数えることができる．ここから答えの候補が求まるから，すべて試して最大値を取ればよい．

<!-- 実装では最初に全体の1および-1の数を数えてから$a[c]$の値に応じてこれを減じている． -->

# B. Build a Contest

B問題であるにもかかわらずSegment Treeを持ちだした．実戦では初めて．まあいい練習にはなったのではないか．https://codeforces.com/contest/1100/submission/48359028

まず$O(mn)$解を考え，あとで高速化する．「$b[i]$:=iの出た回数」という配列を用意すると，更新は$a$の各要素$a[i]$を読む度に$b[a[i]]$に$1$加算することで行える．すると「$k$個目のセットが作れる」は「$b$のすべての要素が$k$以上である」と言い換えられる．したがって次のようにすればよい：$k:=1$とする．各$a[i]$を読んで$b$を更新したあと，$b$全体を走査して先の条件を満たすか判定し，満たされていれば$k$に1を加算すればよい．

<!-- 「$b[i]$:=iの出た回数」という配列を用意すると，更新は$a$の各要素$a[i]$を読む度に$b[a[i]]$に$1$加算することで行える．この更新後に$b$を走査し，すべての要素が$1$以上であれば，各要素は1回ずつ出現したということが分かる．実際はこれを繰り返すので「変数$k:=1$とする．全要素が$k$以上であれば累計$k$ペア揃ったということであり，$k$に1を加算する」ようにする． -->

これを速くしたい．ここで「$b$のすべての要素が$k$以上か」は「$b$の最小値が$k$(以上)[^1]か」と言い換えられる．この判定を$O(n)$より軽いオーダで行いたい．こうするとSegment Treeの利用が見えてくる気がする．配列の区間$[1,n]$の最小値を管理すればよいのでRange Minimum Query問題に帰着される．計算量は$O(n+mlogn)$となり，間に合う．

[^1]: 今回は最小値がkになった途端にkが加算されるため，最小値が$k$より大きくなることはない．

# C. NN and the Optical Illusion

純粋な高校数学という感じがする．https://codeforces.com/contest/1100/submission/48359047

大円$C$と1つの小円$c$について図示してみるとよさそう．$C$の中心を$O$，$c$の中心を$O'$とする．$O$から$c$に引いた接線を書き，その接点をTとすると斜辺$R+r$の直角三角形$OTO'$ができる．図を描くのをサボっているから分かり難いのだが，これについて$cos(180^{\circ}/n)=\frac{\sqrt{(R+r)^2-R^2}}{R+r}$と立式できる．これを$R$について解きたい．というわけでwolframに投げると$R=\frac{rsin(\frac{\pi}{n})}{(cos(\frac{\pi}{2n}) - sin(\frac{\pi}{2n}))^2}$と変形してくれる．あとはこれを実装すればよい．

……と本番中は解いたのだけど，どう考えても$sin(180^{\circ}/n) = \frac{R}{R+r}$を解くべきだった．wolframも要らないし．本番ではwolframをうまく使えずに時間を浪費したこともあり，これに気付かなかったのが惜しまれる．




