<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://00sk0.github.io/blog/common/bundle.css">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://00sk0.github.io/blog/common/bundle.js"></script>
    <link rel="canonical" href="https://00sk0.github.io/blog/posts/abc118/"></link>
    <title>
        AtCoder Beginner Contest #118 - sk0&#39;s blog</title>
  </head>
  <body>
    <div id="background"></div>
    <div id="wrap">
      <header id="top">
        <div id="title">
          <h1><a href="https://00sk0.github.io/blog/">sk0&#39;s blog</a></h1>
        </div>
        <nav id="site">
          <ul>
            
            
            
            <li><a href="https://00sk0.github.io/blog/about">about</a></li>
          </ul>
        </nav>
      </header>
      <main>
        <article id="main">
          <header>
            <h1>AtCoder Beginner Contest #118</h1>
            
            <div id="article_info">
              <p id="dates">published:
                <time>Feb 18, 2019,</time><br> modified:
                <time>Dec 14, 2019.</time>
              </p>
              <p id="categories">
                categories:
                
                
                <a href="https://00sk0.github.io/blog/categories/competitive_programming">competitive_programming</a>
                
                
              </p>
              <p id="tags">
                tags:
                
                
                <a href="https://00sk0.github.io/blog/tags/contest">contest</a>
                
                <a href="https://00sk0.github.io/blog/tags/atcoder">atcoder</a>
                
                <a href="https://00sk0.github.io/blog/tags/ocaml">ocaml</a>
                
                
              </p>
            </div>
            
          </header>
          

<p>コンテストの存在自体を忘却．</p>

<h1 id="a-b-a">A. B+/-A</h1>

<p>一瞬約数判断を素因数分解か結果の埋め込みかで解こうとしてしまった．editorialにもあるが$p$が$q$の約数かどうかは$q$が$p$で割り切れるか，すなわち$q \bmod p = 0$かで見ることができる． <a href="https://atcoder.jp/contests/abc118/submissions/4317394">https://atcoder.jp/contests/abc118/submissions/4317394</a></p>

<h1 id="b-foods-loved-by-everyone">B. Foods Loved by Everyone</h1>

<p>配列で個数をカウントするよくある手法．プログラミング始めたての頃から知っていた気がするのだけど名前は付いているのだろうか． <a href="https://atcoder.jp/contests/abc118/submissions/4317395">https://atcoder.jp/contests/abc118/submissions/4317395</a></p>

<p>種類$i$の出現回数，すなわち$i$を好きな食べ物としている人数を$a[i]$に記録しておけば，種類$i$が全員に好かれているかは$a[i]=N$か否かで判断可能．記録するためには$i$が見つかるたびに$a[i]$+=$1$をすればよい．</p>

<h1 id="c-monsters-battle-royale">C. Monsters Battle Royale</h1>

<p>脳内で10秒くらい雑な証明？をしただけで済ませてしまった．恐らくCodeforcesで類題を見たことがある．解法としては$\gcd\{A_i\}$を取ればよい． <a href="https://atcoder.jp/contests/abc118/submissions/4317397">https://atcoder.jp/contests/abc118/submissions/4317397</a></p>

<p>今回はeditorialが親切なのであまり書くことがない．一応答えの候補にgcdがあることの雑すぎる説明：攻撃による体力変動から最後のモンスターの体力は$\sum k _i A_i$の形になるはず．これは整数$k_i$を上手に決めて作れる数の範囲内であるから，その粒度は最低でも$\gcd \{A_i\}$である気がする（実現可能性を扨措いて）．これにより求める答えがgcd以上であることが言えたから，あとはeditorial通りユークリッドの互除法に気付けばgcdが実際に構築可能かつ最小と分かり，答えとなる．</p>

<p>ユークリッドの互除法になることについてもちょっと書いておきたくなった：体力$p,q \mbox{ s.t. } p \gt q$について大小関係が逆転するまで$(p,q) \to (p-q,q)$ $\to &hellip;$ $\to (p-kq,q)$と遷移させると確かに$p-kq = p \bmod q$．</p>

<h1 id="d-match-matching">D. Match Matching</h1>

<p>$10^4$を$1000$だと思い込み，コードテストで1200ms（C++で400ms）で動くのに何で提出するとTLEなんだろうとか言っていた． <a href="https://atcoder.jp/contests/abc118/submissions/4334689">https://atcoder.jp/contests/abc118/submissions/4334689</a></p>

<p>最初に浮かんだ方針は$dp[i][j] := $「$i$桁目まで使って残りマッチ数が$j$のときに作れる最大の整数（<code>int64</code>を超えるため文字列で管理）」<sup class="footnote-ref" id="fnref:dord"><a href="#fn:dord">1</a></sup>．
更新は
$$dp[i][j-cost[k]] \gets \max \{ dp[i][j-cost[k]], dp[i-1][j] \text{^} k \}$$
である（$k$は使える数字，$cost[k]$はそのコスト，「$\text{^}$」は文字列連結）が，TLEする<sup class="footnote-ref" id="fnref:dtle"><a href="#fn:dtle">2</a></sup>．</p>

<p>ここで桁数$i$が要らない気がしてくる：例えば使う数字として$1$（コスト$2$）と$7$（コスト$3$）を考えてもかなり隙間が空くことになるし，「残りマッチ数が$j$のときに作れる整数」を考えるには不要な情報である（逆になぜ要ると思ったのか分からない）．そこでさらに状態を纏めて$dp[j] :=$「残りマッチ数が$j$のときに作れる最大の整数」とし，$dp[j]$を順に埋めていくことを考えると，遷移は
$$dp[j-cost[k]] \gets \max \{ dp[j-cost[k]], dp[j] \text{^} k \}$$
となる．これなら間に合う．</p>

<p>なお文字列で表した数字のmaxは，単に<code>Pervasives.max</code>では分からない（ほかの言語でも多分そう）：maxで使われている文字列比較は辞書順による比較なので<code>111</code>と<code>2</code>では後者のほうが大きくなってしまう．したがって(1)桁数の大きさ，(2)先頭から見て初めて相違となる数字の大きさ，の順に決める必要があり，これは自前で実装することになる．</p>

<p>実装に際して<code>Pervasives.compare</code>の結果が何を表すかよく覚えていなかったのでメモ：第一引数が大きい<code>(+1)</code>か小さい<code>(-1)</code>か等しい<code>(0)</code>かで覚えるのがよいだろうか．</p>

<p><code>f u v ^ w</code>が<code>(f u v) ^ w</code>と結合することに2分くらい気付かなかった．こうして1行に書くと何となくそういう気はするのだが改行を挟んでしまったので．OCamlにはこういう落とし穴はあるものの，JavaScriptとかCとか書いているときのもっと悪質な落とし穴にはなかなか嵌らない言語な気がする．まあ演算子の優先度は覚えればいいので覚えていない私が悪い．</p>

<p>editorialでは桁数を先にdpで求めてから数字を復元している．正直なところこの問題ではこの方針を採る利点があまり分からない．いちいち文字列を構築したくないときには良いのかもしれない．</p>

<p>因みに「優先度が最高のものを貪欲に並べて桁数最大にする → 余りを調整」みたいな方針も最初の実装中に考えていた．でも2つ以上の数字を使ったりもするので結局似たようなdpをすることになりそう？</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:dord">editorialの「マッチが$j$本のときに作れる最大桁数～～」と紛らわしいが違う．この記事ではマッチの本数$n$から始めて残りが$j$本のときを，editorialでは最初からマッチが$j$本のときを意味している．従って私の実装では$j$は$n$から$0$まで降順に埋めていくことになる．
 <a class="footnote-return" href="#fnref:dord"><sup>[return]</sup></a></li>
<li id="fn:dtle">最大桁数が$N/2$である上に文字列の比較も最悪$N/2$ステップ……だが均すとlogになるようなならないような（未確認）．仮にlogだったとしても少なくとも$O(N^2 M \log N)$はあり厳しそう．実際間に合わない．
 <a class="footnote-return" href="#fnref:dtle"><sup>[return]</sup></a></li>
</ol>
</div>

          <nav id="adjacent">
            
            <div id="next">
              <p><a href="https://00sk0.github.io/blog/posts/abc119/">AtCoder Beginner Contest #119</a></p>
            </div>
            
            
            <div id="prev">
              <p><a href="https://00sk0.github.io/blog/posts/atcoder_yahoo2019/">Atcoder: みんなのプロコン2019</a></p>
            </div>
            
          </nav>
        </article>
        <div id="information">
          <aside id="brief_about">
            <p>WIP</p>
          </aside>
          <nav>
            <section>
              <h1><a href="https://00sk0.github.io/blog/posts">Latest Articles</a></h1>
              <ul id="info_latest_articles">
                
                  <li><a href="https://00sk0.github.io/blog/posts/abc126/">AtCoder Beginner Contest #126</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_diverta2019/">AtCoder: diverta 2019 Programming Contest</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc125/">AtCoder Beginner Contest #125</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc121/">AtCoder Beginner Contest #121</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cp_001/">競プロ過去問演習#1</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc120/">AtCoder Beginner Contest #120</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc119/">AtCoder Beginner Contest #119</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc118/">AtCoder Beginner Contest #118</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_yahoo2019/">Atcoder: みんなのプロコン2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_nikkei2019/">Atcoder: Nikkei Programming Contest 2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_edu_059/">Educational Codeforces #59</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_532/">Codeforces Round #532</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_aising2019/">Atcoder: AISing Programming Contest 2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_530/">Codeforces Round #530</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_hello_2019/">Codeforces Hello 2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_goodbye2018/">Codeforces Good Bye 2018</a></li>
              </ul>
            </section>
            <section><h1><a href="https://00sk0.github.io/blog/categories">Categories</a><sub>x3</sub></h1>
              <ul id="info_categories">
                <li><a href="https://00sk0.github.io/blog/categories/competitive_programming">competitive_programming</a><sub>x18</sub></li>
                <li><a href="https://00sk0.github.io/blog/categories/dev">dev</a><sub>x2</sub></li>
                <li><a href="https://00sk0.github.io/blog/categories/random">random</a><sub>x1</sub></li>
                </ul>
            </section>
            <section><h1><a href="https://00sk0.github.io/blog/tags">Tags</a><sub>x9</sub></h1>
              <ul id="info_tags">
                <li><a href="https://00sk0.github.io/blog/tags/ocaml">ocaml</a><sub>x18</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/contest">contest</a><sub>x16</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/atcoder">atcoder</a><sub>x11</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/codeforces">codeforces</a><sub>x7</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/hugo">hugo</a><sub>x2</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/website">website</a><sub>x2</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/algorithm">algorithm</a><sub>x1</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/gh-pages">gh-pages</a><sub>x1</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/wercker">wercker</a><sub>x1</sub></li>
                </ul>
            </section>
          </nav>
        </div></main>
      <footer id="top">
        <p id="cp">copyright © 2019 sk0</p>
        <p><a href="https://gohugo.io/">Hugo</a>-powered!</p>
      </footer>
    </div>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
      MathJax.Hub.Config({
        TeX:{
          Macros:{
            la: '{\\hspace{5px} \\leftarrow  \\hspace{5px}}',
            ra: '{\\hspace{5px} \\rightarrow \\hspace{5px}}',
            st: '{\\mbox{ s.t. }}',
            ncr: ['{ {} _ {#1} \\mathrm{C} _ {#2} }',2],
            br: '\\\\\\',
            eq: '\\iff' //\\Leftrightarrow
          }
        }
      });
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
  </body>
</html>
