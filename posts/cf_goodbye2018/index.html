<!DOCTYPE html>
<html lang="jp">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://00sk0.github.io/blog/common/bundle.css">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://00sk0.github.io/blog/common/bundle.js"></script>
    <link rel="canonical" href="https://00sk0.github.io/blog/posts/cf_goodbye2018/"></link>
    <title>
        Codeforces Good Bye 2018 - sk0&#39;s blog</title>
  </head>
  <body>
    <div id="background"></div>
    <div id="wrap">
      <header id="top">
        <div id="title">
          <h1><a href="https://00sk0.github.io/blog/">sk0&#39;s blog</a></h1>
        </div>
        <nav id="site">
          <ul>
            
            
            
            <li><a href="https://00sk0.github.io/blog/about">about</a></li>
          </ul>
        </nav>
      </header>
      <main>
        <article id="main">
          <header>
            <h1>Codeforces Good Bye 2018</h1>
            
            <div id="article_info">
              <p id="dates">published:
                <time>Dec 31, 2018,</time><br> modified:
                <time>Dec 14, 2019.</time>
              </p>
              <p id="categories">
                categories:
                
                
                <a href="https://00sk0.github.io/blog/categories/competitive_programming">competitive_programming</a>
                
                
              </p>
              <p id="tags">
                tags:
                
                
                <a href="https://00sk0.github.io/blog/tags/contest">contest</a>
                
                <a href="https://00sk0.github.io/blog/tags/codeforces">codeforces</a>
                
                <a href="https://00sk0.github.io/blog/tags/ocaml">ocaml</a>
                
                
              </p>
            </div>
            
          </header>
          

<p>体調不良で参加は見合わせたのだがそのまま解き続けてみたら結果的に1時間半くらいで4完できたので出ればよかった（+80くらい出たらしい）．</p>

<p>今日のコードはコンテスト時のものをそのまま貼っているので汚い．本当は<a href="https://00sk0.github.io/blog/posts/cf_edu_057">この前の記事</a>みたいにいちいち書き直したいものの，Codeforces+OCamlでは64bit整数関係のライブラリが必要ということもあり，手間を考えると微妙．</p>

<h1 id="a-new-year-and-the-christmas-ornament-https-codeforces-com-contest-1091-problem-a"><a href="https://codeforces.com/contest/1091/problem/A">A. New Year and the Christmas Ornament</a></h1>

<p>制約が小さいのでyellow ornamentsの個数で全探索する． <a href="https://codeforces.com/contest/1091/submission/47768338">https://codeforces.com/contest/1091/submission/47768338</a></p>

<h2 id="o-1-解-editorial">$O(1)$解(editorial)</h2>

<p>解を$(p,p+1,p+2)$とすると，$p \le y$かつ$p+1 \le b$かつ$p+2 \le r$を満たす最大の$p$を取ればよい．移項して整理すれば$p$の条件は$\min\{y,b-1,r-2\}$以下となる（$b&lt;1$や$r&lt;2$のときはこれだけでは$p$が負になってしまうが，本問では制約からそれが起こらない）．求める値は$p+(p+1)+(p+2)=3p+3$個．</p>

<h1 id="b-new-year-and-the-treasure-geolocation-https-codeforces-com-contest-1091-problem-b"><a href="https://codeforces.com/contest/1091/problem/B">B. New Year and the Treasure Geolocation</a></h1>

<p>最初見たときすぐに解法が浮かばなかったのは反省． <a href="https://codeforces.com/contest/1091/submission/47768348">https://codeforces.com/contest/1091/submission/47768348</a></p>

<p>obeliskとclueの対応をすべて列挙すると間に合わないが，最初のobeliskと対応するclueだけを全通り試せばよい．するとtreasureの座標が決まるため，残りの各obeliskについてその座標をtreasureの座標から引くことで対応するclueを求めることが可能．clueをMapに入れて存在を確かめることで$O(n^2 logn)$で求解可能．</p>

<h2 id="o-n-解-editorial">$O(n)$解(editorial)</h2>

<p>obeliskの座標と対応するclueの座標を足すとtreasureの座標となる．ということはobeliskの座標の総和とclueの総和を足すと$n*$(treasureの座標)となるため，単にこれを$n$で割って済む．</p>

<h1 id="c-new-year-and-the-sphere-transmission-https-codeforces-com-contest-1091-problem-c"><a href="https://codeforces.com/contest/1091/problem/C">C. New Year and the Sphere Transmission</a></h1>

<p>30分は掛け過ぎだった． <a href="https://codeforces.com/contest/1091/submission/47768360">https://codeforces.com/contest/1091/submission/47768360</a></p>

<p>$k$が$n$の約数でないときは何周もしてすべての点を通り<sup class="footnote-ref" id="fnref:hoge"><a href="#fn:hoge">1</a></sup>，和は$1+&hellip;+n=\frac{n(n+1)}{2}$となる．
$k$が$n$の約数であるときは1周で終わり<sup class="footnote-ref" id="fnref:fugapiyo"><a href="#fn:fugapiyo">2</a></sup>，通る点は$1+0k,1+1k,1+2k,&hellip;,1+(m-1)k$となる．ただし$m$は$1+mk=n+1$，すなわちちょうど一周するときの値．これらの合計は$m=\frac{n}{k}$より$\sum_{i=0}^{n/k-1} (1+ik)=\frac{n(n+2-k)} {2k}$となる（数学が出来ないのでWolframで計算した）．</p>

<p>肝心の$k$の列挙だが，約数列挙は$O(\sqrt{n})$で十分間に合う．以上の値を列挙すればよい．</p>

<h1 id="d-new-year-and-the-permutation-concatenation-https-codeforces-com-contest-1091-problem-d"><a href="https://codeforces.com/contest/1091/problem/D">D. New Year and the Permutation Concatenation</a></h1>

<p>実験したらなんか規則性が出てきたのでその通りに実装した．理屈は全く分かっていないし非想定解だろう．後でeditorialを読んで理解出来たら追記します．</p>

<h2 id="実験">実験</h2>

<p><a href="https://codeforces.com/contest/1091/submission/47768364">https://codeforces.com/contest/1091/submission/47768364</a></p>

<p>何も分からないので素直に実装して実験するとn=8まではまあまあの時間で計算可能．部分列として同じ数列が出現することがあるので，それらの個数をまとめてみる．これを並べて眺めていると「同じ個数の数列がいくつあるか」もまとめてみたくなるのでそうする．すると次のようになる（次図は1個から）：</p>

<ul>
<li><code>n=3: [ 3,  3]</code></li>
<li><code>n=4: [ 4,  8,  12]</code></li>
<li><code>n=5: [ 5, 15,  40,  60,]</code></li>
<li><code>n=6: [ 6, 24,  90, 240,  360]</code></li>
<li><code>n=7: [ 7, 35, 168, 630, 1680, 2520]</code></li>
</ul>

<p>$n=k$について一番左は$k$，次は$k*(k-2)$となっている．それ以降の要素は，斜めに見ると(左上)$*k$となっている．いま$k=n$についてこの配列を求めたい．これを$a$とおくとき，$k=3,&hellip;,n$において左から二番目の要素を前計算して$b[k]$とすれば，aを求めるにはそこから右下に伸ばしていけばよい：すなわち$b[k]$に$K(k):=(k+1)*&hellip;*n$を掛ければ$a[n-k+2]$が求まる．これを愚直に行えば$O(n^2)$っぽいが，$a$の左から埋めていけばこの階乗みたいなやつを$K(k-1)=K(k)*k$として使いまわせるため$O(n)$で計算可能．答えは$\sum_{i=1}^{n} ia[i]$．</p>

<p>添字をバグらせて苦しんだ．添字を乱択する癖があってよくない．</p>

<!-- [^rv]: あるいは右からでも$K(k+1)=\frac{K(k)}{k+1}$を使えば逆元で求まったりするのかしら． -->
<div class="footnotes">

<hr />

<ol>
<li id="fn:hoge">証明できているか分からない証明：点$1$から点$1$に戻るまでの移動距離は$n$の倍数かつ$k$の倍数だから最短でも$nk$．このとき始点と別に$\frac{nk}{k}=n$点通るが，距離の話はどの点にも言えるので$n+1$点の中に同じ点は$1$以外無い．よってすべての点を通る．
 <a class="footnote-return" href="#fnref:hoge"><sup>[return]</sup></a></li>
<li id="fn:fugapiyo">同様にして移動距離が$n$となるため．
 <a class="footnote-return" href="#fnref:fugapiyo"><sup>[return]</sup></a></li>
</ol>
</div>

          <nav id="adjacent">
            
            <div id="next">
              <p><a href="https://00sk0.github.io/blog/posts/cf_hello_2019/">Codeforces Hello 2019</a></p>
            </div>
            
            
            <div id="prev">
              <p><a href="https://00sk0.github.io/blog/posts/cf_edu_057/">Educational Codeforces #57</a></p>
            </div>
            
          </nav>
        </article>
        <div id="information">
          <aside id="brief_about">
            <p>WIP</p>
          </aside>
          <nav>
            <section>
              <h1><a href="https://00sk0.github.io/blog/posts">Latest Articles</a></h1>
              <ul id="info_latest_articles">
                
                  <li><a href="https://00sk0.github.io/blog/posts/abc126/">AtCoder Beginner Contest #126</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_diverta2019/">AtCoder: diverta 2019 Programming Contest</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc125/">AtCoder Beginner Contest #125</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc121/">AtCoder Beginner Contest #121</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cp_001/">競プロ過去問演習#1</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc120/">AtCoder Beginner Contest #120</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc119/">AtCoder Beginner Contest #119</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/abc118/">AtCoder Beginner Contest #118</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_yahoo2019/">Atcoder: みんなのプロコン2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_nikkei2019/">Atcoder: Nikkei Programming Contest 2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_edu_059/">Educational Codeforces #59</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_532/">Codeforces Round #532</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/atcoder_aising2019/">Atcoder: AISing Programming Contest 2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_530/">Codeforces Round #530</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_hello_2019/">Codeforces Hello 2019</a></li>
                  <li><a href="https://00sk0.github.io/blog/posts/cf_goodbye2018/">Codeforces Good Bye 2018</a></li>
              </ul>
            </section>
            <section><h1><a href="https://00sk0.github.io/blog/categories">Categories</a><sub>x3</sub></h1>
              <ul id="info_categories">
                <li><a href="https://00sk0.github.io/blog/categories/competitive_programming">competitive_programming</a><sub>x18</sub></li>
                <li><a href="https://00sk0.github.io/blog/categories/dev">dev</a><sub>x2</sub></li>
                <li><a href="https://00sk0.github.io/blog/categories/random">random</a><sub>x1</sub></li>
                </ul>
            </section>
            <section><h1><a href="https://00sk0.github.io/blog/tags">Tags</a><sub>x9</sub></h1>
              <ul id="info_tags">
                <li><a href="https://00sk0.github.io/blog/tags/ocaml">ocaml</a><sub>x18</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/contest">contest</a><sub>x16</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/atcoder">atcoder</a><sub>x11</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/codeforces">codeforces</a><sub>x7</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/hugo">hugo</a><sub>x2</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/website">website</a><sub>x2</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/algorithm">algorithm</a><sub>x1</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/gh-pages">gh-pages</a><sub>x1</sub></li>
                <li><a href="https://00sk0.github.io/blog/tags/wercker">wercker</a><sub>x1</sub></li>
                </ul>
            </section>
          </nav>
        </div></main>
      <footer id="top">
        <p id="cp">copyright © 2019 sk0</p>
        <p><a href="https://gohugo.io/">Hugo</a>-powered!</p>
      </footer>
    </div>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
      MathJax.Hub.Config({
        TeX:{
          Macros:{
            la: '{\\hspace{5px} \\leftarrow  \\hspace{5px}}',
            ra: '{\\hspace{5px} \\rightarrow \\hspace{5px}}',
            st: '{\\mbox{ s.t. }}',
            ncr: ['{ {} _ {#1} \\mathrm{C} _ {#2} }',2],
            br: '\\\\\\',
            eq: '\\iff' //\\Leftrightarrow
          }
        }
      });
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
  </body>
</html>
